# linux网络管理

> 参考文章：
>
> https://blog.csdn.net/qq_15096707/article/details/78420069

### Linux网络配置

****

#### ip地址配置

- **ifconfig配置**

  - 临时配置  （重启之后失效）

    ```shell
    ifconfig eth0 192.168.0.200 netmask 255.255.255.0
    ```

- **Setup工具**

  - red hat系列的的系统

- **配置文件配置**

  ```shell
  vi /etc/sysconfig/network-script/ifcfg-eth0 #查看第一张网卡的信息
  
  DEVICE=eth0   #网卡设备名，eth0表示第一张网卡
  HWADDR=00:0C:29:11:30:39
  TYPE=Ethernet
  UUID=5ab36190-a5df-4bf1-94d8-6c126afd05f1 #唯一识别码
  ONBOOT=yes
  NM_CONTROLLED=yes
  BOOTPROTO=dhcp #是否自动获取IP（none、static、dhcp），当值为dhcp时，只需配置上述例子中的那几项就可以联网
  ```

#### 主机配置

- 主机名文件

  ```shell
  vi /etc/sysconfig/network
  
  NETWORKING=yes   #是否工作
  HOSTNAME=localhost.localdomain  #主机名字
  ```

#### DNS配置

- DNS配置文件

  ```shell
  vi /etc/resolv.conf
  
  generated by /sbin/dhclient-script
  search localdomain
  nameserver 192.168.134.2   #域名服务器地址
  ```



### Linux网络命令

****

#### 网络环境操作

1. **ifconfig** 

   - 查看网络状态（IP地址与掩码，但是不能查看网关和DNS）
   - 临时设置IP地址与子网掩码

2. **关闭与启动网卡**

   - `ifdown 网卡设备名`：禁用该网卡设备。 
   - `ifup 网卡设备名`：启用该网卡设备。

3. **查询网络状态**

   `netstat` 命令  （开放端口  启动服务）

   ```shell
   -t：列出TCP协议端口
   -u：列出UPD协议端口
   -n：不使用域名和服务名，而使用IP地址和端口号
   -l：仅列出在监听状态网络服务
   -a：列出所有的网络连接
   -r：列出路由列表，功能和route命令一致
   
   -tuln、-an、-rn
   查看某一状态下的网络连接情况，如：netstat -an | grep ESTABLISHED
   查看某一网络状态下的连接数 ：netstat -an | grep ESTABLISHED | wc -l
   查看当前计算机的网关地址：netstat -rn 和 route -n 
   
   终止连接  logout命令
   ```

4. **路由 网关**

   - `route -n`：查看路由列表（可以看到当前计算机的网关）。
   - `route add default gw 192.168.1.1`：临时设定网关。 
   - `route del default gw 192.168.1.1`：删除设定的网关。 

5. **域名解析**

   `nslookup [主机名或IP]`：进行域名或IP地址的解析

#### 

#### Linux  网络测试

****

1. **探测联通状态**

   `ping [选项] ip或域名`：探测指定IP或域名的网络状况。

2. **远程登录与管理**

   `telnet [域名或IP] [端口]`

3. **路由追踪**

   `traceroute [选项] IP或域名`

4. **监听接受状况**

   `tcpdump`命令：用于监听某一网卡下某一服务的数据包接收情况（截获数据包-抓包）。如：`tcpdump -i eth0 -nnX port 21`。

   ```shell
   
   选项：
   -i 指定监听的网卡
   -nn 将数据包中的域名与服务转为IP和端口显示
   -X 以十六进制和ASCII码显示数据包内容
   port 指定监听的端口
   ```

